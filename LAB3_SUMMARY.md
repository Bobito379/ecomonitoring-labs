# ‚úÖ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ 3 - –ó–ê–í–ï–†–®–ï–ù–û

## –í–∞—Ä—ñ–∞–Ω—Ç 5: –í–∏—è–≤–ª–µ–Ω–Ω—è –∞–Ω–æ–º–∞–ª—å–Ω–æ–≥–æ –≤–∏–∫–∏–¥—É (–ù–°) –∑–∞ —á–∞—Å–æ–≤–∏–º —Ä—è–¥–æ–º

### –©–æ –±—É–ª–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

#### Backend (Node.js/Express/MongoDB)
1. **–ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö** (`AnomalyDetection.js`)
   - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —á–∞—Å–æ–≤–∏—Ö —Ä—è–¥—ñ–≤
   - –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∞–Ω–∞–ª—ñ–∑—É
   - –í–∏—è–≤–ª–µ–Ω—ñ –∞–Ω–æ–º–∞–ª—ñ—ó

2. **Compute —Ñ—É–Ω–∫—Ü—ñ—è** (`anomalyCompute.js`)
   - –ö–æ–≤–∑–Ω–µ —Å–µ—Ä–µ–¥–Ω—î (Œº_t)
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è (œÉ)
   - P95 –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å
   - –î–µ—Ç–µ–∫—Ü—ñ—è –ø–æ–¥—ñ–π –∑–∞ –ø–æ—Ä–æ–≥–æ–º Œº + 3œÉ
   - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö

3. **API Endpoints** (`anomalyDetectionController.js`)
   - POST `/api/anomaly-detection/detect` - –≤–∏—è–≤–ª–µ–Ω–Ω—è –∞–Ω–æ–º–∞–ª—ñ–π
   - GET `/api/anomaly-detection/` - —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å—ñ–≤
   - GET `/api/anomaly-detection/:id` - –¥–µ—Ç–∞–ª—ñ –∑–∞–ø–∏—Å—É
   - GET `/api/anomaly-detection/:id/timeseries` - —á–∞—Å–æ–≤–∏–π —Ä—è–¥
   - DELETE `/api/anomaly-detection/:id` - –≤–∏–¥–∞–ª–µ–Ω–Ω—è

4. **Seed —Å–∫—Ä–∏–ø—Ç** (`seedAnomaly.js`)
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è 48 –≥–æ–¥–∏–Ω –¥–∞–Ω–∏—Ö
   - 4 —Ç–∏–ø–∏ –∑–∞–±—Ä—É–¥–Ω—é–≤–∞—á—ñ–≤: PM2.5, NO‚ÇÇ, SO‚ÇÇ, O‚ÇÉ
   - 3 —Å—Ç–∞–Ω—Ü—ñ—ó
   - –°–∏–Ω—Ç–µ—Ç–∏—á–Ω—ñ –∞–Ω–æ–º–∞–ª—ñ—ó

#### Frontend (React/Vite)
1. **–°—Ç–æ—Ä—ñ–Ω–∫–∞ AnomalyDetectionPage**
   - –§–æ—Ä–º–∞ –≤–≤–æ–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
   - –í–∏–±—ñ—Ä –∑–∞–±—Ä—É–¥–Ω—é–≤–∞—á–∞
   - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–Ω–∞–ª—ñ–∑—É (window size, threshold, duration)
   - –ö–Ω–æ–ø–∫–∞ "–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ"
   - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

2. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç TimeSeriesChart**
   - SVG-–≥—Ä–∞—Ñ—ñ–∫ —á–∞—Å–æ–≤–æ–≥–æ —Ä—è–¥—É
   - –õ—ñ–Ω—ñ—è –≤–∏–º—ñ—Ä—è–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å
   - –õ—ñ–Ω—ñ—è –∫–æ–≤–∑–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ
   - –õ—ñ–Ω—ñ—è –ø–æ—Ä–æ–≥—É
   - –ú–∞—Ä–∫–µ—Ä–∏ –∞–Ω–æ–º–∞–ª—å–Ω–∏—Ö —Ç–æ—á–æ–∫
   - –õ–µ–≥–µ–Ω–¥–∞ —Ç–∞ —ñ–Ω—Ñ–æ–≥—Ä–∞—Ñ—ñ–∫–∞

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∞–Ω–∞–ª—ñ–∑—É**
   - –ö–∞—Ä—Ç–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–≤—Å—å–æ–≥–æ —Ç–æ—á–æ–∫, –∞–Ω–æ–º–∞–ª—ñ–π, –ø–æ–¥—ñ–π, P95)
   - –°–ø–∏—Å–æ–∫ –≤–∏—è–≤–ª–µ–Ω–∏—Ö –ø–æ–¥—ñ–π –∑ –¥–µ—Ç–∞–ª—è–º–∏
   - –ß–∞—Å –ø–æ—á–∞—Ç–∫—É/–∫—ñ–Ω—Ü—è –ø–æ–¥—ñ—ó
   - –ú–∞–∫—Å/—Å–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è
   - –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –ø–æ–¥—ñ—ó

### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

**–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –∞–ø–∞—Ä–∞—Ç:**
- –ö–æ–≤–∑–Ω–µ —Å–µ—Ä–µ–¥–Ω—î: Œº_t = (1/n) √ó Œ£(x_i)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è: œÉ = ‚àö[(1/n) √ó Œ£(x_i - Œº)¬≤]
- –ü–æ—Ä—ñ–≥: threshold = Œº_t + k√óœÉ
- P95: 95-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å —É—Å—ñ—Ö –∑–Ω–∞—á–µ–Ω—å

**–î—ñ–∞–ø–∞–∑–æ–Ω–∏ –¥–∞–Ω–∏—Ö:**
- PM2.5: 2-200 Œº–≥/–º¬≥ (—Å–ø–∞–ª–∞—Ö–∏ –¥–æ 150)
- NO‚ÇÇ: 5-400 Œº–≥/–º¬≥ (—Å–ø–∞–ª–∞—Ö–∏ –¥–æ 350)
- SO‚ÇÇ: 3-200 Œº–≥/–º¬≥ (—Å–ø–∞–ª–∞—Ö–∏ –¥–æ 180)
- O‚ÇÉ: 10-250 Œº–≥/–º¬≥ (—Å–ø–∞–ª–∞—Ö–∏ –¥–æ 230)

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- –ú—ñ–Ω—ñ–º—É–º 24 —Ç–æ—á–∫–∏ —É —á–∞—Å–æ–≤–æ–º—É —Ä—è–¥—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤ –∑–∞–±—Ä—É–¥–Ω—é–≤–∞—á—ñ–≤
- –î—ñ–∞–ø–∞–∑–æ–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ (window: 10-500, threshold: 1-10, duration: 1-200)

### –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏:

```bash
# Backend
cd server
npm run seed:anomaly
npm run dev

# Frontend (–≤ —ñ–Ω—à–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ)
cd react-app
npm run dev
```

–í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:5173 ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–í–∏—è–≤–ª–µ–Ω–Ω—è –∞–Ω–æ–º–∞–ª—ñ–π"

### –§–∞–π–ª–∏ –ø—Ä–æ–µ–∫—Ç—É:

**Backend:**
- `server/models/AnomalyDetection.js`
- `server/utils/anomalyCompute.js`
- `server/controllers/anomalyDetectionController.js`
- `server/routes/anomalyDetectionRoutes.js`
- `server/seedAnomaly.js`
- `server/app.js` (–æ–Ω–æ–≤–ª–µ–Ω–æ)

**Frontend:**
- `react-app/src/pages/AnomalyDetectionPage.jsx`
- `react-app/src/pages/AnomalyDetectionPage.css`
- `react-app/src/components/TimeSeriesChart/TimeSeriesChart.jsx`
- `react-app/src/components/TimeSeriesChart/TimeSeriesChart.css`
- `react-app/src/App.jsx` (–æ–Ω–æ–≤–ª–µ–Ω–æ)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:**
- `LAB3_README.md` - –ø–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- `server/anomaly-tests.http` - —Ç–µ—Å—Ç–∏ API

### –í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –≤–∏–º–æ–≥–∞–º ‚úÖ

- ‚úÖ –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∞ –º–æ–¥–µ–ª—å (–∫–æ–≤–∑–Ω–µ —Å–µ—Ä–µ–¥–Ω—î, œÉ, P95)
- ‚úÖ Compute —Ñ—É–Ω–∫—Ü—ñ—è –±–µ–∑ –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤
- ‚úÖ REST API –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é
- ‚úÖ MongoDB –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è
- ‚úÖ –§–æ—Ä–º–∞ –≤–≤–æ–¥—É –∑ –ø—ñ–¥–∫–∞–∑–∫–∞–º–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–∏–Ω—Ç–µ—Ç–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- ‚úÖ –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è (–≥—Ä–∞—Ñ—ñ–∫ + –º–∞—Ä–∫–µ—Ä–∏)
- ‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–¥—ñ–π –∑ –¥–µ—Ç–∞–ª—è–º–∏
- ‚úÖ –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π UI

**–†–æ–±–æ—Ç—É –≤–∏–∫–æ–Ω–∞–Ω–æ –ø–æ–≤–Ω—ñ—Å—Ç—é! üéâ**
